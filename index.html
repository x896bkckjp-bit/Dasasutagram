<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ€ã‚µã‚¹ã‚¿è¨ºæ–­ PREMIUM</title>
    <style>
        :root {
            --soft-pink: #ff8fa3;
            --grad-pink: linear-gradient(90deg, #ffafbd, #ff8fa3);
            --text-main: #4a4a4a;
        }

        body {
            margin: 0; font-family: 'Hiragino Kaku Gothic ProN', sans-serif;
            background: linear-gradient(135deg, #ffdee9 0%, #b5fffc 100%);
            color: var(--text-main); display: flex; justify-content: center; align-items: center; min-height: 100vh;
        }

        #app {
            width: 92%; max-width: 420px; height: 92vh;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(15px); border-radius: 45px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.05);
            display: flex; flex-direction: column; align-items: center; padding: 20px; box-sizing: border-box;
            border: 4px solid #ffffff; position: relative; overflow-y: auto;
        }

        /* åå·®å€¤å††ã‚°ãƒ©ãƒ• */
        .chart-container { position: relative; width: 140px; height: 140px; margin: 5px auto; display: flex; align-items: center; justify-content: center; }
        .circular-chart { width: 100%; height: 100%; transform: rotate(-90deg); }
        .circle-bg { fill: none; stroke: #f2f2f2; stroke-width: 3; }
        .circle { fill: none; stroke: var(--soft-pink); stroke-width: 3; stroke-linecap: round; transition: stroke-dasharray 1.8s ease; }
        .hen-box { position: absolute; text-align: center; }
        .hen-val { font-size: 3.2rem; font-weight: 900; color: var(--soft-pink); line-height: 1; }

        /* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ */
        .status-row { margin: 12px 0; text-align: left; width: 100%; }
        .status-label { display: flex; justify-content: space-between; font-size: 0.8rem; font-weight: 900; color: #555; margin-bottom: 4px; }
        .status-bar-bg { width: 100%; height: 20px; background: #f0f2f5; border-radius: 20px; overflow: hidden; border: 1.5px solid #fff; }
        .status-bar-fill { height: 100%; width: 0%; background: var(--grad-pink); transition: 2s cubic-bezier(0.1, 1, 0.1, 1); }

        .match-box { background: #fff8f9; border-radius: 15px; padding: 8px; border: 1px solid #ffeef0; width: 100%; box-sizing: border-box; margin-top: 5px; }
        
        button { border: none; border-radius: 30px; font-weight: 900; cursor: pointer; transition: 0.3s; width: 100%; }
        .btn-gradient { background: var(--grad-pink); color: white; padding: 18px; font-size: 1.1rem; }

        /* ç”»é¢åˆ‡ã‚Šæ›¿ãˆç”¨ */
        #quiz, #loading, #result { display: none; width: 100%; }
        
        input[type=range] { -webkit-appearance: none; width: 100%; height: 10px; background: #eee; border-radius: 10px; margin: 25px 0; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; width: 30px; height: 30px; background: var(--soft-pink); border-radius: 50%; border: 3px solid #fff; }
        
        @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.1); opacity: 0.8; } }
    </style>
</head>
<body>

<div id="app">
    <div id="start-screen" style="text-align:center;">
        <h1 style="margin-top:20px; color: var(--soft-pink);">ãƒ€ã‚µã‚¹ã‚¿è¨ºæ–­ ğŸ€</h1>
        <img src="IMG_5115.jpeg" style="width:130px; border-radius:40px; margin:20px 0; border:4px solid #fff;">
        <button class="btn-gradient" onclick="startQuiz()" style="margin-top:25px;">è¨ºæ–­ã‚’é–‹å§‹ã™ã‚‹</button>
    </div>

    <div id="quiz" style="text-align:center;">
        <div id="q-idx" style="font-size:0.8rem; color:var(--soft-pink); font-weight:bold; margin-bottom:20px;">STEP <span id="current-step">01</span>/20</div>
        <div id="q-content"></div>
    </div>

    <div id="loading" style="text-align:center; padding-top:120px;">
        <div style="font-size:3rem; animation: pulse 1.5s infinite;">ğŸŒ¸</div>
        <h2 style="color:var(--soft-pink);">åˆ†æä¸­...</h2>
    </div>

    <div id="result" style="text-align:center;">
        <div class="chart-container">
            <svg viewBox="0 0 36 36" class="circular-chart">
                <path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                <path id="circle-path" class="circle" stroke-dasharray="0, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
            </svg>
            <div class="hen-box">
                <span style="font-size:0.7rem; font-weight:900; color:#ccc; display:block;">åå·®å€¤</span>
                <span class="hen-val" id="hen-val">--</span>
            </div>
        </div>

        <div id="rank-tag" style="background:var(--grad-pink); color:#fff; padding:5px 20px; border-radius:50px; font-weight:900; margin-bottom:10px; display:inline-block; font-size:0.9rem;">---</div>

        <div class="status-row">
            <div class="status-label"><span>âœ¨ ã‚ªã‚·ãƒ£ãƒ¬ãƒ»æ˜ ãˆåº¦</span><span id="lb-1">0%</span></div>
            <div class="status-bar-bg"><div id="br-1" class="status-bar-fill"></div></div>
        </div>
        <div class="status-row">
            <div class="status-label"><span>â˜ï¸ è‡ªæ„è­˜</span><span id="lb-2">0%</span></div>
            <div class="status-bar-bg"><div id="br-2" class="status-bar-fill"></div></div>
        </div>
        <div class="status-row">
            <div class="status-label"><span>ğŸ’ å¢æŠœã‘æœŸå¾…å€¤</span><span id="lb-3">0%</span></div>
            <div class="status-bar-bg"><div id="br-3" class="status-bar-fill"></div></div>
        </div>

        <div class="match-box">
            <span style="font-size:0.75rem; color:var(--soft-pink); font-weight:bold;">ğŸ’˜ ç›¸æ€§ã®è‰¯ã„ã‚¿ã‚¤ãƒ—: </span>
            <span id="match-val" style="font-size:0.95rem; font-weight:900;">---</span>
        </div>

        <div style="width: 100%; background: #ffffff; border-radius: 25px; padding: 20px; margin-top: 20px; border: 2px solid #7ecc49; box-sizing: border-box; text-align: left; box-shadow: 0 10px 25px rgba(0,0,0,0.03);">
            <div style="font-size: 1.1rem; font-weight: 900; color: #000; line-height: 1.4; margin-bottom: 15px;">
                LINEã§è¨ºæ–­ã—ã¦ã‚‹<br>é™å®šã®<span style="color: #ff3366;">å¢æŠœã‘æ–¹æ³•</span>ã‚‚GETï¼
            </div>
            
            <a href="https://line.me/R/ti/p/@208yikuw" style="background: #06C755; color: white; padding: 12px; border-radius: 12px; display: flex; align-items: center; justify-content: space-between; text-decoration: none; font-weight: 900; margin-bottom: 12px;">
                <div style="display: flex; align-items: center; gap: 8px;">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/4/41/LINE_logo.svg" width="22">
                    <span>LINE</span>
                </div>
            </a>

            <a id="share-x-link" href="#" target="_blank" style="background: #000; color: #fff; padding: 12px; border-radius: 50px; text-align: center; font-weight: 900; font-size: 1rem; cursor: pointer; display: block; text-decoration: none;">
                Share X
            </a>
        </div>

        <hr style="border: none; border-top: 1px solid #eee; margin: 30px 0;">

        <div id="ad-area" style="width:100%; min-height:100px; display:block; margin: 20px 0;">
            <script src="https://adm.shinobi.jp/s/ffc49deba048d77c8f1240c87d09a5bd"></script>
            </div>

        <button onclick="location.reload()" style="background:none; color: #bbb; margin: 20px 0; font-size: 1.2rem; font-weight: 900; letter-spacing: 2px; display: block; width: 100%;">RETRY</button>
    </div>
</div>

<script>
    const quizData = [
        { type: "choice", q: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’æŠ•ç¨¿ã™ã‚‹é »åº¦ã¯ï¼Ÿ", c: ["1æ—¥3å›ä»¥ä¸Š", "1æ—¥1ã€œ2å›", "é€±1å›", "ã»ã¼æŠ•ç¨¿ã—ãªã„"], s: [20, 5, 0, 0] },
        { type: "dual", q: "ãƒã‚¤ãƒ©ã‚¤ãƒˆã«ã€Œè‡ªåˆ†ã®åå‰ã€ã‚’å…¥ã‚Œã¦ã‚‹ï¼Ÿ", s: 15 },
        { type: "slider", q: "æŠ•ç¨¿ã®ã€Œæ˜ ãˆã€ã¸ã®ã“ã ã‚ã‚Šåº¦ã¯ï¼Ÿ", s: 1 },
        { type: "choice", q: "ä¸€ç•ªã‚ˆãä½¿ã†ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã¯ï¼Ÿ", c: ["ã‚­ãƒ©ã‚­ãƒ©ç³»", "ç„¡åŠ å·¥é¢¨", "æš—ã‚ãƒ»ãƒ¢ãƒã‚¯ãƒ­", "ãƒ”ãƒ³ã‚¯ç³»"], s: [15, 0, 5, 10] },
        { type: "dual", q: "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®ã‚¢ã‚¤ã‚³ãƒ³ã¯ã€Œä»–æ’®ã‚Šã€ï¼Ÿ", s: 0, ns: 10 },
        { type: "slider", q: "ã¶ã£ã¡ã‚ƒã‘ã€ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼æ•°ã¯æ°—ã«ãªã‚‹ï¼Ÿ", s: 1 },
        { type: "choice", q: "ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã®æ•°ã¯å¹³å‡ã„ãã¤ï¼Ÿ", c: ["ãªã—ãƒ»1å€‹", "2ã€œ5å€‹", "10å€‹ä»¥ä¸Š", "ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ã«æ›¸ã"], s: [0, 5, 15, 10] },
        { type: "dual", q: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã§ã€Œè¦ªã—ã„å‹é”ã€ã‚’å¤šç”¨ã™ã‚‹ï¼Ÿ", s: 10 },
        { type: "choice", q: "ã‚«ãƒ•ã‚§ã§å†™çœŸã‚’æ’®ã‚‹æ™‚ã€æ„è­˜ã™ã‚‹ã®ã¯ï¼Ÿ", c: ["é£Ÿã¹ç‰©ã®ã‚¢ãƒƒãƒ—", "å¼•ãã®ç©ºé–“", "æŒã£ã¦ã„ã‚‹è‡ªåˆ†", "æ’®ã‚‰ãªã„"], s: [10, 0, 15, 0] },
        { type: "slider", q: "é€šçŸ¥ãŒæ¥ã‚‹ã¨ã™ããƒã‚§ãƒƒã‚¯ã—ã¡ã‚ƒã†ï¼Ÿ", s: 1 },
        { type: "dual", q: "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã«MBTIã‚’æ›¸ã„ã¦ã‚‹ï¼Ÿ", s: 15 },
        { type: "choice", q: "åŠ å·¥ã‚¢ãƒ—ãƒªã€ä½•å€‹ä½¿ã£ã¦ã‚‹ï¼Ÿ", c: ["1å€‹ã ã‘", "2ã€œ3å€‹", "5å€‹ä»¥ä¸Š", "ã‚¤ãƒ³ã‚¹ã‚¿å†…ã®ã¿"], s: [0, 5, 15, 0] },
        { type: "dual", q: "å¤œä¸­ã«ç—…ã¿ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’ä¸Šã’ãŸã“ã¨ãŒã‚ã‚‹ï¼Ÿ", s: 20 },
        { type: "slider", q: "ä»–äººã®æŠ•ç¨¿ã‚’è¦‹ã¦ã€Œãƒ€ã‚µã„ã€ã¨æ€ã†ã“ã¨ã¯ï¼Ÿ", s: 1 },
        { type: "choice", q: "è‡ªåˆ†ã®æŠ•ç¨¿ã®çµ±ä¸€æ„Ÿã¯ï¼Ÿ", c: ["å®Œç’§ã«æƒãˆã¦ã‚‹", "ãªã‚“ã¨ãªãæ„è­˜", "ãƒãƒ©ãƒãƒ©", "æ°—ã«ã—ãŸã“ã¨ãªã„"], s: [15, 0, 10, 5] },
        { type: "dual", q: "ãƒªãƒ¼ãƒ«ã‚ˆã‚Šé™æ­¢ç”»ï¼ˆãƒ•ã‚£ãƒ¼ãƒ‰ï¼‰æ´¾ï¼Ÿ", s: 0, ns: 5 },
        { type: "slider", q: "ãƒªã‚¢å‹ä»¥å¤–ã®ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ãŒå¤šã„ï¼Ÿ", s: 1 },
        { type: "choice", q: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã®æ–‡å­—ã‚µã‚¤ã‚ºã¯ï¼Ÿ", c: ["ã‚ã¡ã‚ƒãƒ‡ã‚«ã„", "æ™®é€š", "ç±³ç²’ãã‚‰ã„å°ã•ã„", "èƒŒæ™¯é€é"], s: [15, 5, 10, 0] },
        { type: "dual", q: "é¡è¶Šã—ã®è‡ªæ’®ã‚Šã‚’ã‚ˆãè¼‰ã›ã‚‹ï¼Ÿ", s: 10 },
        { type: "slider", q: "ã¶ã£ã¡ã‚ƒã‘ã€å¢æŠœã‘ãŸã„ã¨æ€ã£ã¦ã‚‹ï¼Ÿ", s: 1 }
    ];

    let current = 0; let score = 0;

    function startQuiz() { 
        document.getElementById('start-screen').style.display = 'none'; 
        document.getElementById('quiz').style.display = 'block'; 
        renderQuestion(); 
    }

    function renderQuestion() {
        const q = quizData[current];
        const area = document.getElementById('q-content');
        document.getElementById('current-step').innerText = String(current + 1).padStart(2, '0');
        area.innerHTML = `<div style="font-size:1.3rem; font-weight:900; margin-bottom:25px;">${q.q}</div>`;
        if (q.type === "choice") {
            q.c.forEach((choice, i) => { area.innerHTML += `<button style="background:#fff; color:#666; padding:16px; margin-bottom:10px; text-align:left; border:1px solid #eee;" onclick="next(${q.s[i]})">${choice}</button>`; });
        } else if (q.type === "dual") {
            area.innerHTML += `<div style="display:grid; grid-template-columns:1fr 1fr; gap:12px;"><button class="btn-gradient" onclick="next(${q.s || 0})">ã¯ã„</button><button style="background:#fff; color:#aaa; border:1px solid #eee; border-radius:30px;" onclick="next(${q.ns || 0})">ã„ã„ãˆ</button></div>`;
        } else if (q.type === "slider") {
            area.innerHTML += `<input type="range" id="sd" min="0" max="100" value="50" oninput="document.getElementById('sv').innerText = this.value + '%'"><div id="sv" style="font-size:3rem; font-weight:900; color:var(--soft-pink); margin-bottom:20px;">50%</div><button class="btn-gradient" onclick="nextSlider()">ç¢ºå®š</button>`;
        }
    }

    function next(pts) {
        score += pts; current++;
        if (current < quizData.length) { renderQuestion(); } 
        else { 
            document.getElementById('quiz').style.display = 'none'; 
            document.getElementById('loading').style.display = 'block'; 
            setTimeout(showResult, 2000); 
        }
    }

    function nextSlider() { score += (document.getElementById('sd').value / 5); next(0); }

    function showResult() {
        document.getElementById('loading').style.display = 'none';
        document.getElementById('result').style.display = 'block';
        let rank, hen, s1, s2, s3, match;
        if (score >= 200) { rank = "é‡ç”£ãŠã˜ã•ã‚“å¥³å­ğŸ’€"; hen = 34; s1 = 12; s2 = 95; s3 = 10; match = "ãƒ¡ã‚¬ãƒç³»ç”·å­"; }
        else if (score >= 130) { rank = "è‡ªæ„è­˜é«˜ã™ãJKâ˜ï¸"; hen = 47; s1 = 42; s2 = 78; s3 = 45; match = "ã‚¹ãƒãƒ¼ãƒ„ç³»ç”·å­"; }
        else if (score >= 70) { rank = "ãµã¤ãƒ¼ã«ã‚ªã‚·ãƒ£ãƒ¬âœ¨"; hen = 64; s1 = 78; s2 = 28; s3 = 82; match = "é«˜æ ¡ç”Ÿãƒ¢ãƒ‡ãƒ«"; }
        else { rank = "åœ§å€’çš„ã‚»ãƒ³ã‚¹æ‹…å½“ğŸ’"; hen = 82; s1 = 98; s2 = 4; s3 = 99; match = "è‹¥æ‰‹ä¿³å„ª"; }
        
        document.getElementById('hen-val').innerText = hen;
        document.getElementById('rank-tag').innerText = rank;
        document.getElementById('match-val').innerText = match;
        document.getElementById('circle-path').setAttribute('stroke-dasharray', `${hen}, 100`);
        
        const shareText = encodeURIComponent(`ç§ã®ã‚¤ãƒ³ã‚¹ã‚¿åå·®å€¤ã¯ã€${hen}ã€‘ã§ã—ãŸï¼ãƒ©ãƒ³ã‚¯ã¯ã€Œ${rank}ã€âœ¨\n#ãƒ€ã‚µã‚¹ã‚¿è¨ºæ–­ #ã‚¤ãƒ³ã‚¹ã‚¿è¨ºæ–­`);
        document.getElementById('share-x-link').href = `https://twitter.com/intent/tweet?text=${shareText}&url=https://x.com/da3asu7agram`;

        setTimeout(() => {
            document.getElementById('br-1').style.width = s1 + "%"; document.getElementById('lb-1').innerText = s1 + "%";
            document.getElementById('br-2').style.width = s2 + "%"; document.getElementById('lb-2').innerText = s2 + "%";
            document.getElementById('br-3').style.width = s3 + "%"; document.getElementById('lb-3').innerText = s3 + "%";
        }, 100);
    }
</script>
</body>
</html>
